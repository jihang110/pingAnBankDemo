<!DOCTYPE html>
<html style="height:100%">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Building a drag-drop shopping cart - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/demo/demo.css">
    <link rel="stylesheet" href="../css/myCssForEasyui.css" />
    <script type="text/javascript" src="../js/jquery.min.js" ></script>
    <script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>
    <link rel="stylesheet" href="../css/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.css"/>
    <script src="../js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
    
</head>
<body style="height:700px;">
<div class="easyui-panel" fit="true" border="false" style="height:100%;overflow:hidden">
    <div class="cart">
    	<div class="easyui-panel remove-border-all" fit="true" border="true">
         <!-- 右面板-->
        <div style="background:#fff;">
        	<div style="height: 40px;background-color: #E95603;">
	    		<img src="../img/√.png"  class="img-title-left"/>
	    		<span class="span-title" style="margin-left: 10px;width: 30%;">已选择列表</span>
	    		<img src="../img/√.png" class="img-title-right"/>
    		</div>
        <table id="cartcontent" fitColumns="true" style="width:100%;height:auto;">
            <thead>
                <tr>
                    <th field="name" width="20%">收款人</th>
                    <th field="pepole" width="20%" align="right">债权人</th>
                    <th field="ccy" width="20%" align="right">交易币种</th>
                    <th field="price" width="20%" align="right">金额</th>
                    <th field="del" width="20%" align="right">操作</th>
                </tr>
            </thead>
        </table>
        </div>
        <div class="ctitle" style="position:absolute;bottom:10px">Drop here to add to cart</div>
    </div>
    </div>
    <!-- 左面板-->
    <div class="products">
    	<div style="height: 40px;background-color: #E95603;">
    		<img src="../img/weijie.png" class="img-title-left"/>
    		<span class="span-title" style="margin-left: 10px;width: 14%;">未结清资产</span>
    		<!--<img src="../img/Ok-select.png" class="img-title-right"/>-->
    		<div class="div-title-tool" style="margin-top:0px ;margin-bottom: 0px;">
    			<div>
    				<a href="#">金额</a>
    			</div>
    			<div>
    				<a href="#">票号</a>
    			</div>
    			<div>
    				<li class="dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown <b class="caret"></b></a>
					<ul class="dropdown-menu">
						<li>
							<a href="#">Action</a>
						</li>
						<li>
							<a href="#">Another action</a>
						</li>
						<li>
							<a href="#">Something else here</a>
						</li>
						<li class="divider"></li>
						<li>
							<a href="#">Separated link</a>
						</li>
					</ul>
				</li>
    			</div>
    			
    			
    			
    			
    			
    			
    		</div>
    	</div>
    	<div class="row-fluid div-strong">
    		<ul>
            <li style="width: 45%;">
    		<div class="div-border item  div-height-250 div-margin-top ">
    				<!--<img src="../img/Ok-select.png" class="img-icon-ok remove-border-all"/>
                -->
                	<div class="span12" style="margin-top: 35px;">
                		<span>票号：</span>
                		<strong>核心企业001</strong>
                	</div>
                	<div class="span12">
                		<span>交易币种：</span>
                		<strong>人民币</strong>
                	</div>
                	<div class="span12">
                		<span>收款人：</span>
                		<strong>平安保理公司</strong>
                	</div>
                	<div class="span12">
                		<span>金额：</span>
                		<strong>￥5000</strong>
                	</div>
                	<!--<input class="btn btn-my btn-right"  type="button" value="选择  >"/>-->
    		</div>
    		</li>
    		<li style="width: 45%;">
    		<div class="div-border item  div-height-250 div-margin-top ">
    				<!--<img src="../img/Ok-select.png" class="img-icon-ok remove-border-all"/>
                -->
                	<div class="span12" style="margin-top: 35px;">
                		<span>票号：</span>
                		<strong>核心企业001</strong>
                	</div>
                	<div class="span12">
                		<span>交易币种：</span>
                		<strong>人民币</strong>
                	</div>
                	<div class="span12">
                		<span>收款人：</span>
                		<strong>平安保理公司</strong>
                	</div>
                	<div class="span12">
                		<span>金额：</span>
                		<strong>￥5000</strong>
                	</div>
                	<!--<input class="btn btn-my btn-right"  type="button" value="选择  >"/>-->
    		</div>
    		</li>
    		<li style="width: 45%;">
    		<div class="div-border item div-height-250 div-margin-top ">
    				<!--<img src="../img/Ok-select.png" class="img-icon-ok remove-border-all"/>
                -->
                	<div class="span12" style="margin-top: 35px;">
                		<span>票号：</span>
                		<strong>核心企业001</strong>
                	</div>
                	<div class="span12">
                		<span>交易币种：</span>
                		<strong>人民币</strong>
                	</div>
                	<div class="span12">
                		<span>收款人：</span>
                		<strong>平安保理公司</strong>
                	</div>
                	<div class="span12">
                		<span>金额：</span>
                		<strong>￥5000</strong>
                	</div>
                	<!--<input class="btn btn-my btn-right"  type="button" value="选择  >"/>-->
    		</div>
    		</li>
    		<li style="width: 45%;">
    		<div class="div-border item  div-height-250 div-margin-top ">
    				<!--<img src="../img/Ok-select.png" class="img-icon-ok remove-border-all"/>
                -->
                	<div class="span12" style="margin-top: 35px;">
                		<span>票号：</span>
                		<strong>核心企业001</strong>
                	</div>
                	<div class="span12">
                		<span>交易币种：</span>
                		<strong>人民币</strong>
                	</div>
                	<div class="span12">
                		<span>收款人：</span>
                		<strong>平安保理公司</strong>
                	</div>
                	<div class="span12">
                		<span>金额：</span>
                		<strong>￥5000</strong>
                	</div>
                	<!--<input class="btn btn-my btn-right"  type="button" value="选择  >"/>-->
    		</div>
    		</li>
    	</div>   
    </div>
    </div>
</div>
    <style type="text/css">
    	body{
    		font-family: "microsoft yahei" !important;
    		font-size: 14px !important;
    	}
        .products{
            overflow:auto;
            height:107%;
            background:#fafafa;
        }
        .products ul{
            list-style:none;
            margin:0;
            padding:0px;
        }
        .products li{
            display:inline;
            float:left;
            margin:10px;
        }
        .item{
            display:block;
            text-decoration:none;
        }
        .item img{
            border:1px solid #333;
        }
        .item p{
            margin:0;
            font-weight:bold;
            text-align:center;
            color:#c3c3c3;
        }
        .cart{
            float:right;
            position:relative;
            width:30%;
            height:100%;
            background:#E5E5E5;
            padding:0px 0px 0px 10px;
        }
        .ctitle{
            text-align:center;
            color:#555;
            font-size:18px;
            padding:10px;
        }
        .span-title{
        	    color: white;
			    font-weight: 900;
			    margin-top: 13px;
			    display: block;
			    float: left;
			    margin-left: 10p
        }
        .img-title-right{
	    	    float: right;
			    margin-right: 20px;
			    margin-top: 10px;
        }
        .img-title-left{
	        	float: left;
	        	margin-left: 20px;
	        	margin-top: 10px;
        }
    </style>
    <script>
        $(function(){
        
            $('#cartcontent').datagrid({
                singleSelect:true,
                showFooter:true,
                idField:'id',
                columns:[[ {field:'id',hidden:true}, 
		        {field:'name',title:'收款人',width:"20%"},  
		        {field:'ccy',title:'交易币种',width:"20%"},
		        {field:'pepole',title:'债权人',width:"20%"},
		        {field:'price',title:'金额',width:"20%"},
		        {field:'del',title:'操作',width:"20%",align:'center',  
            formatter:function(value,rec){ 
            	debugger
            	var str = JSON.stringify(rec)
            	rec['str'] = str;
                var btn = "<a class='editcls' onclick='editRow(\''+rec.id+'\',\''+rec.str+'\')' href='javascript:void(0)'>删除</a>";  
                return btn;  
            }  
        }  
    ]]
//              ,
//  onLoadSuccess:function(data){  
//      $('.editcls').linkbutton({text:'编辑',plain:true,iconCls:'icon-edit'});  
//  } 
		         
            });
            
            $('.item').draggable({
                revert:true,
                proxy:'clone',
                onStartDrag:function(){
                    $(this).draggable('options').cursor = 'not-allowed';
                    $(this).draggable('proxy').css('z-index',10);
                },
                onStopDrag:function(){
                    $(this).draggable('options').cursor='move';
                }
            });
            $('.cart').droppable({
                onDragEnter:function(e,source){
                    $(source).draggable('options').cursor='auto';
                },
                onDragLeave:function(e,source){
                    $(source).draggable('options').cursor='not-allowed';
                },
                onDrop:function(e,source){//添加方法
                	debugger
                	var $element = $($(source).find('strong'));
                    var piaohao = $($element[0]).html();
                    var bizhong = $($element[1]).html();
                    var shou = $($element[2]).html();
                    var jinge = $($element[3]).html();
                    var arry = {name:shou,pepole:'平安保理公司',ccy:bizhong,price:jinge,del:'删除'};
                    addProduct(arry);
                }
            });
        });
        
        function addProduct(arry){
            var dg = $('#cartcontent');
            var data = dg.datagrid('getData');
            function add(){
                for(var i=0; i<data.total; i++){
                    var row = data.rows[i];
//                  if (row.name == arry.name){
//                      row.quantity += 1;
//                      return;
//                  }
                } 
                data.total += 1;
                data.rows.push({
                	id:Math.random(1),
                    name:arry.name,
                    pepole:arry.pepole,
                    price:arry.price,
                    ccy:arry.ccy,
                    del:arry.del
                });
            }
            add();
            dg.datagrid('loadData', data);
            var cost = 0;
            var rows = dg.datagrid('getRows');
            for(var i=0; i<rows.length; i++){
                cost += parseFloat(rows[i].price.split('￥')[1]);
            }
            dg.datagrid('reloadFooter', [{name:'Total',price:cost}]);
        }
        function editRow(id){
        	debugger
        	alert('dsad')
        	$.each($('#cartcontent').datagrid('getRows'), function() {
        		
        	});
        	$('#cartcontent').datagrid();
        }
    </script>
</body>
</html>